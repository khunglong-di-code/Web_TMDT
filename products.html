<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cửa Hàng | Tất Tần Tập</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="image/logo.jfif" type="image/png">

</head>
<body>

  <header class="site-header">
    <div class="header-inner">
      <a class="logo" href="index.html">
        <img src="image/Tattantap_logo1.png" alt="Logo">
      </a>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Trang chủ</a></li>      
          <li><a href="about.html">Về chúng tôi</a></li>
          <li><a href="products.html" class="active">Cửa hàng</a></li>
          <li><a href="faq.html">Hỗ trợ</a></li>
        </ul>
      </nav>
      <div class="header-actions">
          <a class="cart-link" href="cart.html">
            <i class="fa-solid fa-bag-shopping"></i>
            <span class="cart-count" id="cart-count">0</span>
          </a>
      </div>
    </div>
  </header>

  <section class="section bg-light" style="padding: 40px 5%; text-align: center;">
    <div class="container">
      <h1 style="font-size: 2rem; color: var(--secondary-color);">Cửa Hàng</h1>
      <p style="color: var(--text-gray);">Sản phẩm chất lượng - Giá ưu đãi theo số lượng</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="product-grid">

        <article class="product-card">
          <img src="image/1.png" class="product-img" alt="Tất" id="img-sock-display">
          
          <div class="product-info">
            <h3 class="product-name">Tất Cotton Premium</h3>
            
            <div style="background: #fff5eb; padding: 10px; border-radius: 6px; margin-bottom: 15px; border: 1px dashed var(--primary-color); font-size: 0.9rem;">
               <i class="fa-solid fa-tag" style="color: var(--primary-color);"></i> 
               <span id="price-label">Ví dụ: Size Nhỏ - Trắng: <strong>10.000₫</strong>/đôi</span>
            </div>

            <div style="text-align: left; margin-bottom: 15px;">
              <label style="font-size: 0.85rem; font-weight: bold;">Size:</label>
              <select id="size-sock" onchange="updateProductState()" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="S">Nhỏ (S)</option>
                <option value="M">Vừa (M)</option>
                <option value="L">Lớn (L)</option>
              </select>

              <label style="font-size: 0.85rem; font-weight: bold;">Màu:</label>
              <select id="color-sock" onchange="updateProductState()" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="Trắng">Trắng</option>
                <option value="Đen">Đen</option>
              </select>

              <label style="font-size: 0.85rem; font-weight: bold;">Số lượng:</label>
              <input type="number" id="qty-sock" value="1" min="1" onchange="updateProductState()" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <button class="btn-primary" style="width: 100%;" onclick="addToCart('sock')">Thêm vào giỏ</button>
          </div>
        </article>

        <article class="product-card">
          <img src="image/4.png" class="product-img" alt="Sổ">
          <div class="product-info">
            <h3 class="product-name">Sổ Tay Minimalist</h3>
            
            <div style="background: #fff5eb; padding: 10px; border-radius: 6px; margin-bottom: 15px; border: 1px dashed var(--primary-color); font-size: 0.9rem;">
               <i class="fa-solid fa-tag" style="color: var(--primary-color);"></i> 
               Giá niêm yết: <strong>35.000₫</strong>/quyển
            </div>

            <div style="text-align: left; margin-bottom: 15px;">
               <label style="font-size: 0.85rem; font-weight: bold;">Số lượng:</label>
               <input type="number" id="qty-book" value="1" min="1" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <button class="btn-primary" style="width: 100%;" onclick="addToCart('book')">Thêm vào giỏ</button>
          </div>
        </article>

      </div>
    </div>
  </section>

  <footer>
    <style>
        /* CSS cho phần cuối trang: Dàn hàng ngang, đẩy 2 bên */
        .copyright-container {
            display: flex;
            justify-content: space-between; /* Text bên trái, Icon bên phải */
            align-items: center; /* Căn giữa theo chiều dọc */
            width: 100%;
        }

        /* CSS cho icon Mạng xã hội ở góc phải */
        .social-bottom-right {
            display: flex;
            gap: 15px; /* Khoảng cách giữa 2 icon */
        }
        .social-bottom-right a {
            color: inherit; /* Giữ nguyên màu chữ hiện tại của web */
            font-size: 20px;
            text-decoration: none;
            opacity: 0.8;
            transition: 0.3s;
        }
        .social-bottom-right a:hover {
            opacity: 1; /* Sáng lên khi di chuột */
            transform: scale(1.1);
        }

        /* CSS cho logo Bộ Công Thương */
        .bct-logo {
            width: 150px; /* Kích thước logo vừa vặn */
            margin-top: 15px;
            display: block;
        }
    </style>

    <div class="footer-grid">
      <div class="footer-col">
        <h4>Về Tất Tần Tập</h4>
        <p>Chúng tôi cung cấp các sản phẩm văn phòng phẩm và phụ kiện thời trang tối giản, chất lượng cao với mức giá hợp lý.</p>
        
        <a href="http://online.gov.vn/Home/WebDetails/10940" target="_blank">
            <img src="image_dcd887.png" alt="Đã thông báo Bộ Công Thương" class="bct-logo">
        </a>
      </div>

      <div class="footer-col">
        <h4>Liên Hệ</h4>
        <p><i class="fa-solid fa-location-dot"></i> Hai Bà Trưng, Hà Nội</p>
        <p><i class="fa-solid fa-phone"></i> 0967 067 332</p>
        <p><i class="fa-solid fa-envelope"></i> lienhe@tattantap.com</p>
      </div>

      <div class="footer-col">
        <h4>Hỗ Trợ</h4>
        <ul>
          <li><a href="faq.html">Câu hỏi thường gặp</a></li>
          <li><a href="#">Chính sách đổi trả</a></li>
          <li><a href="#">Hướng dẫn mua hàng</a></li>
        </ul>
      </div>
    </div>

    <div class="copyright">
        <div class="copyright-container">
            <span>© 2025 Bản quyền thuộc về Tất Tần Tập. Thiết kế bởi Đào Tất Thành.</span>
            
            <div class="social-bottom-right">
                <a href="https://www.instagram.com/tattantap/" target="_blank" title="Instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>
                <a href="https://www.facebook.com/profile.php?id=61582495130534" target="_blank" title="Facebook">
                    <i class="fa-brands fa-facebook"></i>
                </a>
            </div>
        </div>
    </div>
</footer>

  <a href="mailto:lienhe@tattantap.com" class="chat-widget">
    <i class="fa-solid fa-comment-dots"></i>
  </a>

  <script>
    
      // --- 1. CẤU HÌNH KHO ẢNH ---
      const sockImages = {
          // MÀU ĐEN
          "S_Đen":   "image/conganden.png",    // Ngắn
          "M_Đen":   "image/colung1den.png",   // Vừa
          "L_Đen":   "image/codaiden.png",     // Dài
          
          // MÀU TRẮNG
          "S_Trắng": "image/1.png",   // Ngắn
          "M_Trắng": "image/tatcolung1.jpg",   // Vừa
          "L_Trắng": "image/tatcodai.jpg"      // Dài
      };
  
      function updateCartCount() {
          let cart = JSON.parse(localStorage.getItem('myCart')) || [];
          let total = 0;
          cart.forEach(item => total += parseInt(item.quantity));
          document.getElementById('cart-count').innerText = total;
      }
  
      // HÀM XỬ LÝ CHUNG: CẬP NHẬT GIÁ + ĐỔI ẢNH
      function updateProductState() {
          const size = document.getElementById('size-sock').value;
          const color = document.getElementById('color-sock').value;
          const qty = parseInt(document.getElementById('qty-sock').value) || 1; // Mặc định là 1 nếu trống
          const imgElement = document.getElementById('img-sock-display');
          
          // --- 1. Logic Đổi Ảnh (Đã sửa) ---
          // Tạo key để tra cứu trong sockImages, ví dụ: "S_Đen"
          const key = size + "_" + color;
          
          // Kiểm tra xem key có tồn tại trong kho ảnh không
          if (sockImages[key]) {
              imgElement.src = sockImages[key];
          } else {
              // Ảnh mặc định nếu không tìm thấy (fallback)
              imgElement.src = 'image/1.png'; 
          }
  
          // --- 2. Logic Tính Giá ---
          let price = 0;
          let sizeName = "";
  
          if (size === 'S') { 
              sizeName = "Nhỏ";
              if (qty >= 10) price = 6000; else if (qty >= 5) price = 8000; else price = 10000;
          } else if (size === 'M') { 
              sizeName = "Vừa";
              if (qty >= 10) price = 8000; else if (qty >= 5) price = 10000; else price = 12000;
          } else if (size === 'L') { 
              sizeName = "Lớn";
              if (qty >= 10) price = 10000; else if (qty >= 5) price = 12000; else price = 14000;
          }
  
          // --- 3. Cập nhật Text hiển thị ---
          const label = document.getElementById('price-label');
          // Tính tổng tiền tạm tính để khách dễ hình dung
          const totalTemp = price * qty;
          
          label.innerHTML = `
              Size ${sizeName} - ${color} <br>
              Đơn giá: <strong>${price.toLocaleString('vi-VN')}₫</strong>/đôi <br>
              <span style="font-size: 0.8rem; color: #666">(Tạm tính: ${totalTemp.toLocaleString('vi-VN')}₫)</span>
          `;
      }
  
      function addToCart(type) {
          let product = {};
          
          if (type === 'sock') {
              const size = document.getElementById('size-sock').value;
              const color = document.getElementById('color-sock').value;
              const qty = parseInt(document.getElementById('qty-sock').value);
              
              // Tính toán lại giá tại thời điểm thêm vào giỏ để lưu vào localStorage
              let price = 0;
              if (size === 'S') { 
                  if (qty >= 10) price = 6000; else if (qty >= 5) price = 8000; else price = 10000;
              } else if (size === 'M') { 
                  if (qty >= 10) price = 8000; else if (qty >= 5) price = 10000; else price = 12000;
              } else if (size === 'L') { 
                  if (qty >= 10) price = 10000; else if (qty >= 5) price = 12000; else price = 14000;
              }
  
              let sizeName = (size === 'S') ? "Nhỏ" : (size === 'M') ? "Vừa" : "Lớn";
  
              product = {
                  id: 'sock_' + size + '_' + color, 
                  name: `Tất Cotton (${sizeName} - ${color})`,
                  type: 'sock',
                  size: size,
                  color: color,
                  price: price, // Lưu giá chính xác vào giỏ
                  quantity: qty,
                  image: sockImages[size + "_" + color] || 'image/1.png' // Lưu link ảnh để hiển thị trong giỏ hàng
              };
          } else if (type === 'book') {
              const qty = parseInt(document.getElementById('qty-book').value);
              product = {
                  id: 'book_std',
                  name: 'Sổ Tay Minimalist',
                  type: 'book',
                  price: 35000,
                  quantity: qty,
                  image: 'image/4.png'
              };
          }
  
          let cart = JSON.parse(localStorage.getItem('myCart')) || [];
          
          // Kiểm tra xem sản phẩm đã có trong giỏ chưa
          let existingItem = cart.find(item => item.id === product.id);
          
          if (existingItem) {
              existingItem.quantity += product.quantity;
              // Lưu ý: Nếu logic giá thay đổi theo tổng số lượng mới, bạn có thể cần cập nhật lại giá ở đây
          } else {
              cart.push(product);
          }
  
          localStorage.setItem('myCart', JSON.stringify(cart));
          updateCartCount();
          alert(`Đã thêm "${product.name}" vào giỏ hàng!`);
      }
  
      // --- KHỞI CHẠY LẦN ĐẦU ---
      updateCartCount();
      updateProductState(); // Gọi hàm này ngay để cập nhật giá/ảnh đúng khi vừa tải trang
    </script>

</body>
</html>
