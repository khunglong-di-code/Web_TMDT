<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>C·ª≠a H√†ng | T·∫•t T·∫ßn T·∫≠p</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="image/Tattantap_logo1.png" type="image/png">

  <style>
    /* --- CSS S·∫¢N PH·∫®M (GI·ªÆ NGUY√äN) --- */
    .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; max-width: 1000px; margin: 0 auto; }
    .product-card { background: #fff; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; border-radius: 12px; overflow: hidden; border: 1px solid #eee; }
    .product-card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
    .product-img { width: 100%; height: 450px; object-fit: cover; border-bottom: 1px solid #f0f0f0; }
    .product-info { padding: 25px; text-align: center; }
    .product-name { font-size: 1.4rem; margin-bottom: 10px; color: var(--secondary-color); }
    .product-price-preview { display: block; font-size: 1.1rem; color: var(--primary-color); font-weight: bold; margin-bottom: 15px; }
    .btn-select { background: var(--secondary-color); color: white; border: none; padding: 12px 30px; border-radius: 30px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: 0.3s; width: 100%; }
    .btn-select:hover { background: var(--primary-color); transform: scale(1.02); }
    @media (max-width: 768px) { .product-grid { grid-template-columns: 1fr; } .product-img { height: 350px; } }

    /* --- CSS POP-UP TR∆Ø·ª¢T --- */
    .popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; opacity: 0; visibility: hidden; transition: all 0.3s ease; backdrop-filter: blur(2px); }
    .popup-overlay.active { opacity: 1; visibility: visible; }

    .sliding-sheet { position: fixed; bottom: -100%; left: 50%; transform: translateX(-50%); width: 100%; max-width: 500px; background: white; border-radius: 20px 20px 0 0; padding: 0; z-index: 2001; transition: bottom 0.4s cubic-bezier(0.19, 1, 0.22, 1); box-shadow: 0 -10px 40px rgba(0,0,0,0.2); max-height: 90vh; display: flex; flex-direction: column; }
    .sliding-sheet.active { bottom: 0; }

    /* Header c·ªßa Popup */
    .sheet-header { padding: 20px 25px 10px; display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 1px solid #f0f0f0; }
    .sheet-info h3 { margin: 0 0 5px 0; font-size: 1.3rem; color: var(--secondary-color); }
    .sheet-price { color: var(--primary-color); font-weight: bold; font-size: 1.2rem; }
    .sheet-close { background: none; border: none; font-size: 1.8rem; cursor: pointer; color: #999; }

    /* --- CSS M·ªöI: TAB SWITCHER --- */
    .sheet-tabs { display: flex; border-bottom: 1px solid #eee; background: #f9f9f9; }
    .tab-btn { flex: 1; padding: 15px; border: none; background: none; cursor: pointer; font-weight: bold; color: #888; font-size: 1rem; border-bottom: 3px solid transparent; transition: 0.3s; }
    .tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); background: #fff; }
    
    .sheet-content-wrapper { padding: 25px; overflow-y: auto; flex: 1; }
    
    /* ·∫®n hi·ªán n·ªôi dung Tab */
    .tab-content { display: none; animation: fadeIn 0.3s; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    /* CSS cho n·ªôi dung c≈© (Tab Th√¥ng tin) */
    .popup-gallery { float: left; width: 120px; margin-right: 20px; }
    .popup-main-img { width: 120px; height: 120px; object-fit: cover; border-radius: 12px; border: 1px solid #eee; margin-bottom: 10px; }
    .thumbnail-list { display: flex; gap: 8px; flex-wrap: wrap; }
    .thumb-img { width: 35px; height: 35px; object-fit: cover; border-radius: 4px; cursor: pointer; border: 2px solid transparent; transition: 0.2s; }
    .thumb-img:hover, .thumb-img.active { border-color: var(--primary-color); }
    
    .option-group { margin-bottom: 20px; clear: both; }
    .option-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 0.95rem; color: #444; }
    .option-group select, .option-group input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; outline: none; }
    .option-group select:focus, .option-group input:focus { border-color: var(--primary-color); }

    /* CSS cho Tab M√¥ t·∫£ */
    .desc-text { color: #555; line-height: 1.6; font-size: 0.95rem; text-align: justify; }
    .desc-text p { margin-bottom: 10px; }

    .sheet-footer { padding: 15px 25px 25px; border-top: 1px solid #eee; background: #fff; }
    .btn-add-cart { width: 100%; background: var(--primary-color); color: white; padding: 16px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body>

  <header class="site-header">
    <div class="header-inner">
      <a class="logo" href="index.html">
        <img src="image/Tattantap_logo1.png" alt="Logo">
      </a>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Trang ch·ªß</a></li>      
          <li><a href="about.html">V·ªÅ ch√∫ng t√¥i</a></li>
          <li><a href="products.html" class="active">C·ª≠a h√†ng</a></li>
          <li><a href="faq.html">H·ªó tr·ª£</a></li>
        </ul>
      </nav>
      <div class="header-actions">
          <a class="cart-link" href="cart.html">
            <i class="fa-solid fa-bag-shopping"></i>
            <span class="cart-count" id="cart-count">0</span>
          </a>
      </div>
    </div>
  </header>

  <section class="section bg-light" style="padding: 40px 5%; text-align: center;">
    <div class="container">
      <h1 style="font-size: 2rem; color: var(--secondary-color);">C·ª≠a H√†ng</h1>
      <p style="color: var(--text-gray);">Ch·∫°m v√†o s·∫£n ph·∫©m ƒë·ªÉ xem chi ti·∫øt</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="product-grid">
        <!-- S·∫¢N PH·∫®M 1: T·∫§T -->
        <article class="product-card" onclick="openPopup('sock')">
          <img src="image/1.png" class="product-img" alt="T·∫•t Cotton Premium">
          <div class="product-info">
            <h3 class="product-name">T·∫•t Cotton Premium</h3>
            <span class="product-price-preview">Ch·ªâ t·ª´ 6.000‚Ç´</span>
            <button class="btn-select">Ch·ªçn ph√¢n lo·∫°i</button>
          </div>
        </article>

        <!-- S·∫¢N PH·∫®M 2: S·ªî -->
        <article class="product-card" onclick="openPopup('book')">
          <img src="image/4.png" class="product-img" alt="S·ªï Tay Minimalist">
          <div class="product-info">
            <h3 class="product-name">S·ªï Tay Minimalist</h3>
            <span class="product-price-preview">35.000‚Ç´</span>
            <button class="btn-select">Th√™m v√†o gi·ªè</button>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- KHUNG POP-UP TR∆Ø·ª¢T (GIAO DI·ªÜN M·ªöI C√ì TAB) -->
  <div class="popup-overlay" id="popup-overlay" onclick="closePopup()"></div>
  
  <div class="sliding-sheet" id="product-sheet">
      <!-- 1. Header Popup -->
      <div class="sheet-header">
          <div class="sheet-info">
              <h3 id="popup-name">T√™n S·∫£n Ph·∫©m</h3>
              <div class="sheet-price" id="popup-price">0‚Ç´</div>
          </div>
          <button class="sheet-close" onclick="closePopup()"><i class="fa-solid fa-xmark"></i></button>
      </div>

      <!-- 2. Tabs Navigation -->
      <div class="sheet-tabs">
          <button class="tab-btn active" onclick="switchTab('info', this)">T√πy ch·ªçn</button>
          <button class="tab-btn" onclick="switchTab('desc', this)">M√¥ t·∫£ chi ti·∫øt</button>
      </div>

      <!-- 3. N·ªôi dung cu·ªôn -->
      <div class="sheet-content-wrapper">
          
          <!-- TAB 1: TH√îNG TIN & T√ôY CH·ªåN (Giao di·ªán c≈©) -->
          <div id="tab-info" class="tab-content active">
              <div class="popup-gallery">
                  <img id="popup-img" class="popup-main-img" src="" alt="·∫¢nh chi ti·∫øt">
                  <div id="notebook-thumbnails" class="thumbnail-list"></div>
              </div>
              
              <!-- T√πy ch·ªçn cho T·∫•t -->
              <div id="sock-options">
                  <div class="option-group">
                      <label>K√≠ch th∆∞·ªõc (Size):</label>
                      <select id="size-sock" onchange="updatePopupState()">
                          <option value="S">Nh·ªè (S)</option>
                          <option value="M">V·ª´a (M)</option>
                          <option value="L">L·ªõn (L)</option>
                      </select>
                  </div>
                  <div class="option-group">
                      <label>M√†u s·∫Øc:</label>
                      <select id="color-sock" onchange="updatePopupState()">
                          <option value="Tr·∫Øng">Tr·∫Øng</option>
                          <option value="ƒêen">ƒêen</option>
                      </select>
                  </div>
              </div>

              <!-- S·ªë l∆∞·ª£ng chung -->
              <div class="option-group">
                  <label>S·ªë l∆∞·ª£ng:</label>
                  <input type="number" id="popup-qty" value="1" min="1" onchange="updatePopupState()">
              </div>
              <div style="clear:both;"></div>
          </div>

          <!-- TAB 2: M√î T·∫¢ S·∫¢N PH·∫®M -->
          <div id="tab-desc" class="tab-content">
              <div id="popup-desc-text" class="desc-text">
                  <!-- N·ªôi dung m√¥ t·∫£ s·∫Ω ƒë∆∞·ª£c JS ƒëi·ªÅn v√†o ƒë√¢y -->
              </div>
          </div>

      </div>

      <!-- 4. Footer Button (Lu√¥n hi·ªÉn th·ªã) -->
      <div class="sheet-footer">
          <button class="btn-add-cart" onclick="confirmAddToCart()">Th√™m V√†o Gi·ªè H√†ng</button>
      </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <style>
        .copyright-container { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .social-bottom-right { display: flex; gap: 15px; }
        .social-bottom-right a { color: inherit; font-size: 20px; text-decoration: none; opacity: 0.8; transition: 0.3s; }
        .social-bottom-right a:hover { opacity: 1; transform: scale(1.1); }
        .bct-logo { width: 150px; margin-top: 15px; display: block; }
    </style>
    <div class="footer-grid">
      <div class="footer-col">
        <h4>V·ªÅ T·∫•t T·∫ßn T·∫≠p</h4>
        <p>Ch√∫ng t√¥i cung c·∫•p c√°c s·∫£n ph·∫©m vƒÉn ph√≤ng ph·∫©m v√† ph·ª• ki·ªán th·ªùi trang t·ªëi gi·∫£n.</p>
        <a href="http://online.gov.vn/Home/WebDetails/10940" target="_blank">
            <img src="image_dcd887.png" alt="ƒê√£ th√¥ng b√°o B·ªô C√¥ng Th∆∞∆°ng" class="bct-logo">
        </a>
      </div>
      <div class="footer-col">
        <h4>Li√™n H·ªá</h4>
        <p><i class="fa-solid fa-location-dot"></i> Hai B√† Tr∆∞ng, H√† N·ªôi</p>
        <p><i class="fa-solid fa-phone"></i> 0967 067 332</p>
        <p><i class="fa-solid fa-envelope"></i> lienhe@tattantap.com</p>
      </div>
      <div class="footer-col">
        <h4>H·ªó Tr·ª£</h4>
        <ul>
          <li><a href="faq.html">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a></li>
          <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
          <li><a href="#">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
        </ul>
      </div>
    </div>
    <div class="copyright">
        <div class="copyright-container">
            <span>¬© 2025 B·∫£n quy·ªÅn thu·ªôc v·ªÅ T·∫•t T·∫ßn T·∫≠p. Thi·∫øt k·∫ø b·ªüi ƒê√†o T·∫•t Th√†nh.</span>
            <div class="social-bottom-right">
                <a href="https://www.instagram.com/tattantap/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://www.facebook.com/profile.php?id=61582495130534" target="_blank"><i class="fa-brands fa-facebook"></i></a>
            </div>
        </div>
    </div>
  </footer>

  <!-- Chat Plugin -->
  <div id="fb-root"></div>
  <div id="fb-customer-chat" class="fb-customerchat"></div>
  <script>
    var chatbox = document.getElementById('fb-customer-chat');
    chatbox.setAttribute("page_id", "61582495130534");
    chatbox.setAttribute("attribution", "biz_inbox");
    window.fbAsyncInit = function() { FB.init({ xfbml : true, version : 'v18.0' }); };
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = 'https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>

  <!-- LOGIC SCRIPT -->
  <script>
      // 1. D·ªÆ LI·ªÜU S·∫¢N PH·∫®M (·∫¢NH & M√î T·∫¢)
      const sockImages = {
          "S_ƒêen": "image/conganden.png",
          "M_ƒêen": "image/colung1den.png",
          "L_ƒêen": "image/codaiden.png",
          "S_Tr·∫Øng": "image/1.png",
          "M_Tr·∫Øng": "image/tatcolung1.jpg",
          "L_Tr·∫Øng": "image/tatcodai.jpg"
      };

      const notebookImages = [ "image/4.png", "image/sach1.png", "image/sach2.png" ];

      // üëáüëáüëá B·∫†N ƒêI·ªÄN M√î T·∫¢ V√ÄO ƒê√ÇY üëáüëáüëá
      const productDescriptions = {
          'sock': `
              <p><strong>Ch·∫•t li·ªáu:</strong> 90% Cotton t·ª± nhi√™n, 10% Spandex gi√∫p co gi√£n 4 chi·ªÅu.</p>
              <p><strong>ƒê·∫∑c ƒëi·ªÉm:</strong> Kh√°ng khu·∫©n, kh·ª≠ m√πi, th·∫•m h√∫t m·ªì h√¥i t·ªët. C·ªï t·∫•t d·ªát kim ch·∫Øc ch·∫Øn, kh√¥ng b·ªã d√£o sau nhi·ªÅu l·∫ßn gi·∫∑t.</p>
              <p><strong>H∆∞·ªõng d·∫´n b·∫£o qu·∫£n:</strong> Gi·∫∑t m√°y ·ªü ch·∫ø ƒë·ªô nh·∫π ho·∫∑c gi·∫∑t tay. Tr√°nh ph∆°i tr·ª±c ti·∫øp d∆∞·ªõi √°nh n·∫Øng g·∫Øt.</p>
          `,
          'book': `
              <p><strong>Lo·∫°i gi·∫•y:</strong> Gi·∫•y kem ng√† ch·ªëng l√≥a, ƒë·ªãnh l∆∞·ª£ng 100gsm d√†y d·∫∑n, vi·∫øt b√∫t m·ª±c kh√¥ng b·ªã th·∫•m sang trang sau.</p>
              <p><strong>Thi·∫øt k·∫ø:</strong> B√¨a c·ª©ng Kraft phong c√°ch Vintage t·ªëi gi·∫£n. G√°y l√≤ xo k√©p ch·∫Øc ch·∫Øn, d·ªÖ d√†ng l·∫≠t m·ªü 360 ƒë·ªô.</p>
              <p><strong>K√≠ch th∆∞·ªõc:</strong> A5 ti√™u chu·∫©n (148 x 210 mm), 120 trang.</p>
          `
      };
      // üëÜüëÜüëÜ -------------------------------- üëÜüëÜüëÜ

      let currentProductType = '';

      // 2. H√ÄM CHUY·ªÇN TAB
      function switchTab(tabName, btnElement) {
          // ·∫®n t·∫•t c·∫£ n·ªôi dung tab
          document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
          // B·ªè active ·ªü t·∫•t c·∫£ n√∫t
          document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

          // Hi·ªán tab ƒë∆∞·ª£c ch·ªçn
          document.getElementById('tab-' + tabName).classList.add('active');
          // Active n√∫t ƒë∆∞·ª£c b·∫•m
          if(btnElement) {
              btnElement.classList.add('active');
          } else {
              // M·∫∑c ƒë·ªãnh active n√∫t ƒë·∫ßu ti√™n n·∫øu kh√¥ng truy·ªÅn btnElement
              document.querySelector('.sheet-tabs .tab-btn').classList.add('active');
          }
      }

      // 3. M·ªû POPUP
      function openPopup(type) {
          currentProductType = type;
          const sheet = document.getElementById('product-sheet');
          const overlay = document.getElementById('popup-overlay');
          const sockOptions = document.getElementById('sock-options');
          const qtyInput = document.getElementById('popup-qty');
          const imgElement = document.getElementById('popup-img');
          const thumbContainer = document.getElementById('notebook-thumbnails');
          const descContent = document.getElementById('popup-desc-text');

          qtyInput.value = 1;
          
          // Reset v·ªÅ tab ƒë·∫ßu ti√™n m·ªói khi m·ªü
          switchTab('info', document.querySelector('.sheet-tabs .tab-btn:first-child'));

          // Load M√¥ t·∫£ s·∫£n ph·∫©m
          descContent.innerHTML = productDescriptions[type];

          if (type === 'sock') {
              document.getElementById('popup-name').innerText = "T·∫•t Cotton Premium";
              sockOptions.style.display = 'block';
              thumbContainer.style.display = 'none'; 
              
              document.getElementById('size-sock').value = 'S';
              document.getElementById('color-sock').value = 'Tr·∫Øng';
          } else {
              document.getElementById('popup-name').innerText = "S·ªï Tay Minimalist";
              sockOptions.style.display = 'none';
              thumbContainer.style.display = 'flex';
              
              imgElement.src = notebookImages[0] || "image/4.png";

              thumbContainer.innerHTML = ''; 
              notebookImages.forEach((src, index) => {
                  let thumb = document.createElement('img');
                  thumb.src = src;
                  thumb.className = 'thumb-img';
                  thumb.onerror = function() { this.src = 'image/4.png'; }; 
                  
                  thumb.onclick = function() {
                      imgElement.src = src;
                      document.querySelectorAll('.thumb-img').forEach(el => el.classList.remove('active'));
                      thumb.classList.add('active');
                  };
                  if(index === 0) thumb.classList.add('active');
                  thumbContainer.appendChild(thumb);
              });
          }

          updatePopupState();
          overlay.classList.add('active');
          sheet.classList.add('active');
      }

      function closePopup() {
          document.getElementById('product-sheet').classList.remove('active');
          document.getElementById('popup-overlay').classList.remove('active');
      }

      function updatePopupState() {
          const qty = parseInt(document.getElementById('popup-qty').value) || 1;
          const priceLabel = document.getElementById('popup-price');
          const imgElement = document.getElementById('popup-img');

          if (currentProductType === 'sock') {
              const size = document.getElementById('size-sock').value;
              const color = document.getElementById('color-sock').value;
              const key = size + "_" + color;
              imgElement.src = sockImages[key] || 'image/1.png';

              let unitPrice = 0;
              if (size === 'S') unitPrice = (qty >= 10) ? 6000 : (qty >= 5) ? 8000 : 10000;
              else if (size === 'M') unitPrice = (qty >= 10) ? 8000 : (qty >= 5) ? 10000 : 12000;
              else if (size === 'L') unitPrice = (qty >= 10) ? 10000 : (qty >= 5) ? 12000 : 14000;

              priceLabel.innerHTML = `${unitPrice.toLocaleString('vi-VN')}‚Ç´`;
          } else {
              const unitPrice = 35000;
              priceLabel.innerHTML = `${unitPrice.toLocaleString('vi-VN')}‚Ç´`;
          }
      }

      function confirmAddToCart() {
          let product = {};
          const qty = parseInt(document.getElementById('popup-qty').value);

          if (currentProductType === 'sock') {
              const size = document.getElementById('size-sock').value;
              const color = document.getElementById('color-sock').value;
              const sizeName = (size === 'S') ? "Nh·ªè" : (size === 'M') ? "V·ª´a" : "L·ªõn";
              
              let price = 0;
              if (size === 'S') price = (qty >= 10) ? 6000 : (qty >= 5) ? 8000 : 10000;
              else if (size === 'M') price = (qty >= 10) ? 8000 : (qty >= 5) ? 10000 : 12000;
              else if (size === 'L') price = (qty >= 10) ? 10000 : (qty >= 5) ? 12000 : 14000;

              product = {
                  id: 'sock_' + size + '_' + color, 
                  name: `T·∫•t Cotton (${sizeName} - ${color})`,
                  type: 'sock',
                  size: size,
                  color: color,
                  price: price,
                  quantity: qty,
                  image: document.getElementById('popup-img').src
              };
          } else {
              product = {
                  id: 'book_std',
                  name: 'S·ªï Tay Minimalist',
                  type: 'book',
                  price: 35000,
                  quantity: qty,
                  image: 'image/4.png' 
              };
          }

          let cart = JSON.parse(localStorage.getItem('myCart')) || [];
          let existingItem = cart.find(item => item.id === product.id);
          
          if (existingItem) {
              existingItem.quantity += product.quantity;
          } else {
              cart.push(product);
          }
          localStorage.setItem('myCart', JSON.stringify(cart));
          updateCartCount();
          closePopup();
          alert(`ƒê√£ th√™m "${product.name}" v√†o gi·ªè h√†ng!`);
      }

      function updateCartCount() {
          let cart = JSON.parse(localStorage.getItem('myCart')) || [];
          let total = 0;
          cart.forEach(item => total += parseInt(item.quantity));
          document.getElementById('cart-count').innerText = total;
      }

      updateCartCount();
  </script>

</body>
</html>
